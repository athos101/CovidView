<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Minha Localização</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">


<div class="container mt-5">		
  <div class="row">
    <!-- Coluna do Mapa -->
    <div class="col-md-8">
      <h2>Minha Localização</h2>
      <button id="btnLocal" class="btn btn-primary mb-3">Mostrar no Mapa</button>
      <iframe id="mapa" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
    </div>

    <!-- Coluna do Card -->
    <div class="col-md-4">
      <div class="card shadow-lg">
        <div class="card-body">
          <h5 class="card-title text-center mb-3">Buscar País</h5>

          <!-- Campo de texto -->
          <div class="input-group mb-3">
            <input type="text" id="pais" class="form-control" placeholder="Digite o nome de um país">
            <button id="buscar" class="btn btn-primary">Buscar</button>
          </div>

          <!-- Resultado -->
          <div id="resultado" class="mt-3 text-center"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const btn = document.getElementById("btnLocal");
  const mapa = document.getElementById("mapa");
  btn.addEventListener("click", verificarMapa); 
  
  function verificarMapa() {
	  
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition((pos) => {
          const lat = pos.coords.latitude;
          const lon = pos.coords.longitude;

          // Monta a URL do Google Maps com lat e lon
          const url = `https://www.google.com/maps?q=${lat},${lon}&hl=pt&z=14&output=embed`;

          // Atualiza o src do iframe
          mapa.src = url;
        },
        (err) => {
          alert("Erro ao obter localização: " + err.message);
        }
      );
    } else {
      alert("Geolocalização não suportada neste navegador.");
    }
  }
  
  
 document.getElementById("buscar").addEventListener("click", Buscar);

  function Buscar() {
    const nomePais = document.getElementById("pais").value;
    if (!nomePais) {
      document.getElementById("resultado").textContent = "Digite o nome de um país.";
      return;
    }

    fetch("https://restcountries.com/v3.1/name/" + nomePais)
      .then(res => res.json())
      .then(dados => {
		console.log(dados); // Mostrar o que recebemos no dados (vindo de res.json ...
        const pais = dados[0];
        document.getElementById("resultado").innerHTML = `
          <h3>${pais.name.common} (${pais.cca2})</h3>
          <p>Capital: ${pais.capital ? pais.capital[0] : "Não informada"}</p> 
          <p>População: ${pais.population.toLocaleString()}</p>
          <img src="${pais.flags.svg}" width="150">
        `;
      })
      .catch(err => {
        document.getElementById("resultado").textContent = "Erro ao buscar país.";
      });
  }  
</script>

</body>
</html>
